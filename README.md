# Auditable Entity - Section One

This project contains an abstract `Auditable` class that serves as a base for other entities in the ResumeApp. The `Auditable` class provides fields for auditing purposes (e.g., `createdBy`, `updatedBy`, `createdAt`, and `updatedAt`), ensuring every entity has tracking information about when and by whom it was created or updated. The class uses JPA annotations to handle persistence and validation, and it leverages Spring’s auditing features for automatic field management.

## Annotations and Explanation

### 1. `@Getter` and `@Setter`
- These annotations from **Lombok** automatically generate the getter and setter methods for the fields in the class, reducing boilerplate code.
- `@Getter`: Automatically generates getter methods.
- `@Setter`: Automatically generates setter methods.

### 2. `@MappedSuperclass`
- Marks this class as a **mapped superclass**, meaning its fields and mappings are inherited by subclasses.
- This annotation ensures that other entities extending `Auditable` will also inherit the fields and behaviors.

### 3. `@EntityListeners(AuditingEntityListener.class)`
- Registers the class with an **auditing entity listener**, provided by Spring Data JPA, to automatically manage the audit fields (`createdAt`, `updatedAt`).

### 4. `@Id`
- Marks the `id` field as the **primary key** of the entity.

### 5. `@SequenceGenerator`
- Defines the **sequence generator** for generating the primary key.
- `name`: Name of the sequence generator.
- `sequenceName`: The sequence name used in the database.
- `allocationSize`: Defines the increment size for the sequence.

### 6. `@GeneratedValue`
- Specifies the strategy for generating the primary key (`GenerationType.SEQUENCE`).
- Uses the previously defined sequence generator.

### 7. `@Column`
- Configures the column for the database.
    - `updatable = false`: Ensures that the `id` column cannot be updated once it's set.
    - `nullable = false`: The column value cannot be null in the database.

### 8. `@NotNull`
- Ensures that the annotated fields (`createdBy`, `updatedBy`, `createdAt`) are not null. This helps enforce validation before persisting the entity.

### 9. `@CreatedDate`
- A Spring annotation that automatically populates the `createdAt` and `updatedAt` fields with the current timestamp when the entity is created or updated.

### 10. `@PrePersist`
- Defines a method to be invoked before the entity is persisted.
- Ensures that the `createdBy`, `updatedBy`, `createdAt`, and `updatedAt` fields are populated with the current user ID from the `RequestContext` and the current timestamp.

### 11. `@PreUpdate`
- Defines a method to be invoked before the entity is updated.
- Updates the `updatedBy` and `updatedAt` fields with the current user ID and timestamp when the entity is modified.

## Fields

- **`id`**: The primary key, generated by a sequence.
- **`referenceId`**: A randomly generated unique identifier using `AlternativeJdkIdGenerator`.
- **`createdBy`**: Stores the ID of the user who created the entity.
- **`updatedBy`**: Stores the ID of the user who last updated the entity.
- **`createdAt`**: Stores the timestamp when the entity was created.
- **`updatedAt`**: Stores the timestamp when the entity was last updated.

## Methods

### `beforePersist()`
- This method is called before the entity is saved for the first time.
- It retrieves the current user’s ID from `RequestContext` and sets the `createdBy` and `updatedBy` fields with the same ID.

### `beforeUpdate()`
- This method is called before the entity is updated.
- It ensures that the `updatedBy` and `updatedAt` fields are updated with the current user’s ID and timestamp.

## Usage

The `Auditable` class can be extended by any entity that needs auditing fields. It automatically tracks who created and updated the entity, along with timestamps.

### Example:
```java
@Entity
public class User extends Auditable {
    // Custom fields and methods for Resume entity
}
```
